---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.16.1
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

# init

```{python}
import pandas as pd
import warnings
import math
import numpy as np
from tabulate import tabulate
```

# load data

```{python}
top_50_areas_df = pd.read_csv('/home/shaghayegh/class/New York project/test.csv')
top_50_areas_df
```

```{python}
warnings.filterwarnings('ignore')
```

## top 50 areas mape & rmse

```{python}
def mape(real, pred):
    return (abs(pred - real) / real).mean()


mape_1_day_lag = mape(top_50_areas_df['Daily_trips'], top_50_areas_df['1_day_lag'])
mape_1_day_lag
```

```{python}
mape_7_days_lag = mape(top_50_areas_df['Daily_trips'], top_50_areas_df['7_days_lag'])
mape_7_days_lag
```

```{python}
def rmse(real, pred):
    a =((pred - real) ** 2).mean()
    return math.sqrt(a)

rmse_1_day_lag = rmse(top_50_areas_df['Daily_trips'], top_50_areas_df['1_day_lag'])
rmse_1_day_lag
```

```{python}
rmse_7_days_lag = rmse(top_50_areas_df['Daily_trips'], top_50_areas_df['7_days_lag'])
rmse_7_days_lag
```

```{python}
top_50_areas_df['ratio'] = top_50_areas_df['1_day_lag'] / top_50_areas_df['8_days_lag']
top_50_areas_df
```

```{python}
top_50_areas_df['pred'] = top_50_areas_df['7_days_lag'] * top_50_areas_df['ratio']
top_50_areas_df
```

```{python}
mape_prediction = mape(top_50_areas_df['Daily_trips'], top_50_areas_df['pred'] )
mape_prediction
```

```{python}
rmse_prediction = rmse(top_50_areas_df['Daily_trips'], top_50_areas_df['pred'] )
rmse_prediction
```

```{python}
result_table = [["1_day_lag",mape_1_day_lag, rmse_1_day_lag],
         ["7_days_lag",mape_7_days_lag, rmse_7_days_lag],
         ["Prediction",mape_prediction, rmse_prediction]]
print(tabulate(result_table, headers=["FREQUENCY","MAPE", "RMSE"], tablefmt="simple_grid"))
```

```{python}

```
